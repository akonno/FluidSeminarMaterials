{"version":2,"kind":"Article","sha256":"8671812f24e0e02010b4869f9b2062aedd44951eed2f3aab1a05dd0474eefaab","slug":"pygame2","location":"/pygame2.md","dependencies":[],"frontmatter":{"title":"PyGame-CEによるインタラクティブ表現入門その2：PyGame-CEの基本とアニメーション","content_includes_title":false,"copyright":"2025 KONNO Akihisa","exports":[{"format":"md","filename":"pygame2.md","url":"/build/pygame2-62921a0f329c9521851a3b5c8715cbb1.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"Ry8Aov72B0"}],"key":"ZbIBCcjkGa"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"この回のゴール:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VGvmEwSAvi"}],"key":"oVa1dwTb8g"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"pygame-ceでさまざまな図形を描ける","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gKko6ItlTU"}],"key":"Kk4Q8rKPsT"}],"key":"ITsdwzQASb"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"かんたんなアニメーションを描ける","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"o8A82ll2ot"}],"key":"Fir5z02sJb"}],"key":"Uh8Tg4xaRd"}],"key":"Tym7buUIEm"}],"key":"f39rIndVPp"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"PyGame-CEプログラムの構成を学ぶ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"zAoaoOiNFL"}],"identifier":"pygame-ce","label":"PyGame-CEプログラムの構成を学ぶ","html_id":"pygame-ce","implicit":true,"key":"ub7B0PKyvM"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"前回の教材で以下のようなプログラムを作成した．このプログラムの内容を理解していこう．","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"quQm8B6ks0"}],"key":"y08dp1SZRp"},{"type":"code","lang":"python","value":"import pygame\n\n# 初期化\npygame.init()\n\n# 400ピクセル×400ピクセルのウィンドウをつくる\nWIDTH, HEIGHT = 400, 400\nscreen = pygame.display.set_mode((WIDTH, HEIGHT))\npygame.display.set_caption(\"PyGame-CE Program 1: basic drawing\")\n\nclock = pygame.time.Clock()\nrunning = True\n\n# メインループ\nwhile running:\n    # 1. イベント処理\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False  # ウィンドウ右上の×で終了\n\n    # 2. 背景を塗る\n    screen.fill((220, 220, 220))  # R,G,B [0-255]\n\n    # 3. 図形を描く\n    # 青い円 (x=200, y=200, 半径30)\n    pygame.draw.circle(screen, (0, 0, 255), (200, 200), 30)\n\n    # 赤い四角形 (x=50, y=50, 幅80, 高さ80)\n    pygame.draw.rect(screen, (255, 0, 0), (50, 50, 80, 80))\n\n    # 4. 画面を更新\n    pygame.display.flip()\n\n    # 5. フレームレート制御 (1秒あたり60フレーム程度)\n    clock.tick(60)\n\n# 終了処理\npygame.quit()","position":{"start":{"line":13,"column":1},"end":{"line":52,"column":1}},"key":"Mc9PkWtOOA"},{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"ポイント:","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"LEJv23kh9e"}],"key":"bYxq2Gfc3U"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":55,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"while running:","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"W3sE6ubZyT"},{"type":"text","value":" の部分は、プログラムが動いている間くり返し処理を行う","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"npRHztbP5A"},{"type":"strong","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"メインループ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"JSIjhBTHhE"}],"key":"UvuNaQJo5O"},{"type":"text","value":"である。\nこの中でイベント（入力）を処理していることから、","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"ouUgYeZgmy"},{"type":"strong","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"イベントループ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"s9UaLfhVI1"}],"key":"LPjksVSZBY"},{"type":"text","value":"と呼ばれることもある。","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"lG0LO7POwZ"}],"key":"BV45mshvHo"}],"key":"bgEsj6h1tm"},{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"if event.type == pygame.QUIT:","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"zxgoeFvjOm"},{"type":"text","value":" は「ウィンドウを閉じる操作が来たらメインループから抜ける」という分岐である．メインループが","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"KQc6vDkwAH"},{"type":"inlineCode","value":"while running:","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"a8cAUySh1u"},{"type":"text","value":"で回っているので，","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"Ux1ceGtesn"},{"type":"inlineCode","value":"running = False","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"V5hFhaOADk"},{"type":"text","value":"とすればメインループから抜けることになる．","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"NmsSNEeT9b"}],"key":"xVVDmU3wqe"}],"key":"hCs5j3OTs2"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"screen.fill(...)","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"tcqjBCxL1M"},{"type":"text","value":" は画面全体を灰色に塗りつぶしている．つまり画面の背景色を設定している．","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"g5wpOElUPd"}],"key":"WdaRULfKPV"}],"key":"AfPEM4uN6C"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"pygame.draw.circle(...)","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"MKwgCXSou8"},{"type":"text","value":" は円，","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"xl2CMlJ16p"},{"type":"inlineCode","value":"pygame.draw.rect(...)","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"LhEDGr5TNQ"},{"type":"text","value":" は四角形を描いている．","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"oOurHEkOnA"}],"key":"QaLz0te46N"}],"key":"Kww9bD9Jp1"}],"key":"mtykgW191o"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"メインループの中で円と四角形を描画しているので，つまりこのプログラムは「画面を一度灰色に塗りつぶしてから，円と四角形を描画する」という操作を何度も繰り返し行っている．しかし円と四角形を描画する位置が変わらないので，事実上，静止画を表示したのと同じことになっている．","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"nWtr8HCiHU"}],"key":"q4L0fl46LJ"},{"type":"heading","depth":2,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"かんたんなアニメーション","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"dfJkcjI3rl"}],"identifier":"id","label":"かんたんなアニメーション","html_id":"id","implicit":true,"key":"Ul4UzMTvxY"},{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"円と四角形を動かしてみよう．つまり，円と四角形を描画する位置をメインループの中で変えてみよう．","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"dJS6aoZIng"}],"key":"haE2z2sF7q"},{"type":"code","lang":"python","value":"x1 = 200\nx2 = 50\n# メインループ\nwhile running:\n    # 1. イベント処理\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False  # ウィンドウ右上の×で終了\n\n    # 2. 背景を塗る\n    screen.fill((220, 220, 220))  # R,G,B [0-255]\n\n    # 3. 図形を描く\n    # 青い円 (x=x1, y=200, 半径30)\n    pygame.draw.circle(screen, (0, 0, 255), (x1, 200), 30)\n\n    # 赤い四角形 (x=x2, y=50, 幅80, 高さ80)\n    pygame.draw.rect(screen, (255, 0, 0), (x2, 50, x2+30, 80))","position":{"start":{"line":67,"column":1},"end":{"line":86,"column":1}},"key":"ACeJxOg2NR"},{"type":"heading","depth":2,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"text","value":"3. 座標系について","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"l9WD7U45Zg"}],"identifier":"id-3","label":"3. 座標系について","html_id":"id-3","implicit":true,"key":"M81w6Ylugx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":91,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"画面の左上が (0, 0)","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"I7FFql97Ct"}],"key":"pD6eMbw8y9"}],"key":"VAsM4ipins"},{"type":"listItem","spread":true,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"右方向に行くほど x が増える","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"Du0ucJiMEW"}],"key":"TPZjPhYkyW"}],"key":"lQcJz2qJN8"},{"type":"listItem","spread":true,"position":{"start":{"line":93,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"下方向に行くほど y が増える","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"key":"zg64koHrR8"}],"key":"lAgl1rPKz5"}],"key":"LXWhdWyq4U"}],"key":"IBmArYsd1c"},{"type":"paragraph","position":{"start":{"line":95,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"これは，今後「重力が下向き（+y方向）」といった物理シミュレーションを行うときにもそのまま使います。\n（つまり y方向の正の向きが「下」というルールです。）","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"v1VKpahxgx"}],"key":"aFUWM5Hun2"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"例","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"GEhXm4DLZP"}],"key":"GO30w2OAAz"},{"type":"paragraph","position":{"start":{"line":99,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"(x, y) = (200, 200) は，画面のほぼ真ん中あたり。\n半径30の円をそこに置いたのが上のコードの ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"riM1jQvhLI"},{"type":"inlineCode","value":"pygame.draw.circle(...)","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"ICl5u8QjEC"},{"type":"text","value":" です。","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"SheNVlh6MX"}],"key":"N5vGSJHGbi"}],"key":"R3abkK37FF"},{"type":"heading","depth":2,"position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"4. おまけ: マウスの位置に円を描く","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"ySuSu36LI0"}],"identifier":"id-4","label":"4. おまけ: マウスの位置に円を描く","html_id":"id-4","implicit":true,"key":"AnQqWg9mR2"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":107,"column":1}},"children":[{"type":"text","value":"「インタラクティブだ」と感じてもらうために，マウスに追随する円も試してみましょう。\n下のように，描画のところだけ少し変えてみてください。","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"TMKXXqXOPa"}],"key":"xp3bbX0TX2"},{"type":"code","lang":"python","value":"    # 2. 背景を塗る\n    screen.fill((255, 255, 255))\n\n    # 3. マウス位置を取得\n    mx, my = pygame.mouse.get_pos()\n\n    # 4. マウスのところに青い円\n    pygame.draw.circle(screen, (0, 0, 255), (mx, my), 20)","position":{"start":{"line":109,"column":1},"end":{"line":118,"column":1}},"key":"E6QUgvqY3b"},{"type":"paragraph","position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"text","value":"動かしてみると，マウスポインタを追いかける青い円が表示されます。","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"Slzqe1YLbx"},{"type":"break","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"w3GZNsscek"},{"type":"text","value":"これは「リアルタイム入力 → 描画」というゲーム・インタラクティブアートの基本になります。","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"nbKAgdeoAO"}],"key":"Prfw5UZdse"},{"type":"heading","depth":2,"position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"children":[{"type":"text","value":"5. 課題（LMS提出）","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"huRYOzDOWw"}],"identifier":"id-5-lms","label":"5. 課題（LMS提出）","html_id":"id-5-lms","implicit":true,"key":"psINuj9jKJ"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"課題","position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"key":"qVYseTomfv"}],"key":"PO17iXPe0q"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":127,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"背景色・円・四角形の色やサイズ・位置を自由に変更し，自分なりの画面をデザインする。","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"nyrQ4R5Cqo"}],"key":"gW938qAd29"}],"key":"XLkf6M2mBG"},{"type":"listItem","spread":true,"position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"プログラムを実行して，ウィンドウが開いている状態のスクリーンショットを撮る。","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"dWkimK7xZw"}],"key":"sT6BanDQ1j"}],"key":"kpPkzPruAN"},{"type":"listItem","spread":true,"position":{"start":{"line":129,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"スクリーンショットをLMSに提出する。","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"NsGxIz1r87"}],"key":"FuZl5lC0Jl"}],"key":"OWsMBFIhzV"}],"key":"PHXq8s6f9i"},{"type":"paragraph","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"text","value":"注意：","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"hYVrVdUjY7"}],"key":"rgCt3m46Sh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":132,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"ウィンドウを閉じる前に撮影してください。","position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"key":"wKD445f1Lf"}],"key":"ozlAZzEydx"}],"key":"yrgEi88xDA"},{"type":"listItem","spread":true,"position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"これ以降の回の評価のベースになるので，このプログラム (","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"i6Zl086Lic"},{"type":"inlineCode","value":"lesson05.py","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"ninWDU5UXG"},{"type":"text","value":") は消さずにとっておいてください。","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"vS5L0jyHUv"}],"key":"PUgBOipDQI"}],"key":"YYXsUY6TIw"}],"key":"eWeYs9SPie"}],"key":"l9yApuIgcF"},{"type":"heading","depth":2,"position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"6. ライセンス","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"NzXJon6bOJ"}],"identifier":"id-6","label":"6. ライセンス","html_id":"id-6","implicit":true,"key":"BjsOlIZXZz"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"mtOWwW5KiX"}],"key":"keO1E6rKBL"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"text","value":"このページの本文と図版は CC BY-NC-SA 4.0 とします。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"VGSjtkUBYx"},{"type":"break","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"Y9RI0momjT"},{"type":"text","value":"サンプルコードは MIT License とします。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"ecwQtYC8Hv"},{"type":"break","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"dEs04vGxDB"},{"type":"text","value":"一部の学生作品のスクリーンショットなどはこの限りではありません。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"xzSXY40af8"},{"type":"break","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"aKe8fVTzSL"},{"type":"text","value":"提出物（あなた自身のコードやスクリーンショット）は，ポートフォリオや就職活動で自由に使ってよいものとします。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"ShaBI1c2qj"}],"key":"TVNNxoalGY"}],"key":"chPiMn0iHE"}],"key":"vncSDorruN"}],"key":"WMLIaljvcY"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"PyGame-CEによるインタラクティブ表現入門その1：PyGame-CEのインストールと実行","url":"/pygame1","group":"流体工学セミナー・教材集"}}},"domain":"http://localhost:3000"}