{"version":2,"kind":"Article","sha256":"8671812f24e0e02010b4869f9b2062aedd44951eed2f3aab1a05dd0474eefaab","slug":"pygame2","location":"/pygame2.md","dependencies":[],"frontmatter":{"title":"PyGame-CEによるインタラクティブ表現入門その2：PyGame-CEの基本とアニメーション","content_includes_title":false,"copyright":"2025 KONNO Akihisa","exports":[{"format":"md","filename":"pygame2.md","url":"https://akonno.github.io/FluidSeminarMaterials//build/pygame2-15bbf5784e8ec499f2d1c89a257af4e9.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"TV4WFopKzz"}],"key":"yZgtHNAIvs"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"この回のゴール:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"pc4ITungty"}],"key":"LFXqT4cto0"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"pygame-ceでさまざまな図形を描ける","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wUdnnNpdtb"}],"key":"duepAXwAat"}],"key":"EiHWQ4UtJS"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"かんたんなアニメーションを描ける","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"a4IL7Dqkxs"}],"key":"p5p52BgRdq"}],"key":"no3bPhYjg8"}],"key":"zi5zvqNCXz"}],"key":"saMO3nCwh6"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"PyGame-CEプログラムの構成を学ぶ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"zlZl7DNf3b"}],"identifier":"pygame-ce","label":"PyGame-CEプログラムの構成を学ぶ","html_id":"pygame-ce","implicit":true,"key":"U2B7eLQtsC"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"前回の教材で以下のようなプログラムを作成した．このプログラムの内容を理解していこう．","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"jXzanCOlCS"}],"key":"MF8MBCm1aO"},{"type":"code","lang":"python","value":"import pygame\n\n# 初期化\npygame.init()\n\n# 400ピクセル×400ピクセルのウィンドウをつくる\nWIDTH, HEIGHT = 400, 400\nscreen = pygame.display.set_mode((WIDTH, HEIGHT))\npygame.display.set_caption(\"PyGame-CE Program 1: basic drawing\")\n\nclock = pygame.time.Clock()\nrunning = True\n\n# メインループ\nwhile running:\n    # 1. イベント処理\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False  # ウィンドウ右上の×で終了\n\n    # 2. 背景を塗る\n    screen.fill((220, 220, 220))  # R,G,B [0-255]\n\n    # 3. 図形を描く\n    # 青い円 (x=200, y=200, 半径30)\n    pygame.draw.circle(screen, (0, 0, 255), (200, 200), 30)\n\n    # 赤い四角形 (x=50, y=50, 幅80, 高さ80)\n    pygame.draw.rect(screen, (255, 0, 0), (50, 50, 80, 80))\n\n    # 4. 画面を更新\n    pygame.display.flip()\n\n    # 5. フレームレート制御 (1秒あたり60フレーム程度)\n    clock.tick(60)\n\n# 終了処理\npygame.quit()","position":{"start":{"line":13,"column":1},"end":{"line":52,"column":1}},"key":"CWTdsXDwN7"},{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"ポイント:","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"bXeFnPeFBc"}],"key":"PCkynqRxvp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":55,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"while running:","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"n1jThAuggr"},{"type":"text","value":" の部分は、プログラムが動いている間くり返し処理を行う","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"PCmP7tCO7q"},{"type":"strong","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"メインループ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"ontiwzq3Dt"}],"key":"AgC1biKtZQ"},{"type":"text","value":"である。\nこの中でイベント（入力）を処理していることから、","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"gG4asCHPSJ"},{"type":"strong","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"イベントループ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"QgJ3oYrVeP"}],"key":"OZtiGlsTjJ"},{"type":"text","value":"と呼ばれることもある。","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"hWfPGOAZoB"}],"key":"Gky8QP5ZFb"}],"key":"q1RDz1NmeY"},{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"if event.type == pygame.QUIT:","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"wpUiODcjhN"},{"type":"text","value":" は「ウィンドウを閉じる操作が来たらメインループから抜ける」という分岐である．メインループが","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"bsYOYD0v46"},{"type":"inlineCode","value":"while running:","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"YHw9b3ptTP"},{"type":"text","value":"で回っているので，","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"rdCNqGGCHR"},{"type":"inlineCode","value":"running = False","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"vbEvf9yRvD"},{"type":"text","value":"とすればメインループから抜けることになる．","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"YiPx59gEdT"}],"key":"Ez7XW7exnx"}],"key":"NsKD32e7Mp"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"screen.fill(...)","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"SANT0he5jR"},{"type":"text","value":" は画面全体を灰色に塗りつぶしている．つまり画面の背景色を設定している．","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"ve1moJbHY6"}],"key":"Xw4YQsEdT7"}],"key":"yknlHCufOa"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"pygame.draw.circle(...)","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"ISPK3tgiB1"},{"type":"text","value":" は円，","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"T7V2Pv4D1w"},{"type":"inlineCode","value":"pygame.draw.rect(...)","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"nqJ03VzocF"},{"type":"text","value":" は四角形を描いている．","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"qVQdTnAQ0X"}],"key":"QHh9pq0cTG"}],"key":"Owl7b14QCV"}],"key":"HLOGKxdyp7"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"メインループの中で円と四角形を描画しているので，つまりこのプログラムは「画面を一度灰色に塗りつぶしてから，円と四角形を描画する」という操作を何度も繰り返し行っている．しかし円と四角形を描画する位置が変わらないので，事実上，静止画を表示したのと同じことになっている．","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"x1ce8ACHUm"}],"key":"NPE07HxM80"},{"type":"heading","depth":2,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"かんたんなアニメーション","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"htkA5YWRjq"}],"identifier":"id","label":"かんたんなアニメーション","html_id":"id","implicit":true,"key":"XWutzaGfC6"},{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"円と四角形を動かしてみよう．つまり，円と四角形を描画する位置をメインループの中で変えてみよう．","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"df6q8o8feX"}],"key":"mP6wJg9nly"},{"type":"code","lang":"python","value":"x1 = 200\nx2 = 50\n# メインループ\nwhile running:\n    # 1. イベント処理\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False  # ウィンドウ右上の×で終了\n\n    # 2. 背景を塗る\n    screen.fill((220, 220, 220))  # R,G,B [0-255]\n\n    # 3. 図形を描く\n    # 青い円 (x=x1, y=200, 半径30)\n    pygame.draw.circle(screen, (0, 0, 255), (x1, 200), 30)\n\n    # 赤い四角形 (x=x2, y=50, 幅80, 高さ80)\n    pygame.draw.rect(screen, (255, 0, 0), (x2, 50, x2+30, 80))","position":{"start":{"line":67,"column":1},"end":{"line":86,"column":1}},"key":"cJ91o0xXrs"},{"type":"heading","depth":2,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"text","value":"3. 座標系について","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"he9rjHh2w8"}],"identifier":"id-3","label":"3. 座標系について","html_id":"id-3","implicit":true,"key":"PF7itkedMT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":91,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"画面の左上が (0, 0)","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"tCYHE8iIFs"}],"key":"Xf791rH9jC"}],"key":"reXRDQGsJh"},{"type":"listItem","spread":true,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"右方向に行くほど x が増える","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"x8e8MK4DWW"}],"key":"d7ndQDkJVs"}],"key":"MRbt1hf9S5"},{"type":"listItem","spread":true,"position":{"start":{"line":93,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"下方向に行くほど y が増える","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"key":"S0aMVj7A1c"}],"key":"N5FrSR1EvT"}],"key":"WMvz6WKQt2"}],"key":"Oc47zVyZVd"},{"type":"paragraph","position":{"start":{"line":95,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"これは，今後「重力が下向き（+y方向）」といった物理シミュレーションを行うときにもそのまま使います。\n（つまり y方向の正の向きが「下」というルールです。）","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"HOhABQCx0x"}],"key":"M0n3oFeBAe"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"例","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"p2MLY2WtQR"}],"key":"QG0MnICyIV"},{"type":"paragraph","position":{"start":{"line":99,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"(x, y) = (200, 200) は，画面のほぼ真ん中あたり。\n半径30の円をそこに置いたのが上のコードの ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"oxtdjCEoyQ"},{"type":"inlineCode","value":"pygame.draw.circle(...)","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"ty86kDRmBu"},{"type":"text","value":" です。","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"njgKXAM7oX"}],"key":"C9KBT45gSp"}],"key":"MaSl0EECaa"},{"type":"heading","depth":2,"position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"4. おまけ: マウスの位置に円を描く","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"AQId7zd34a"}],"identifier":"id-4","label":"4. おまけ: マウスの位置に円を描く","html_id":"id-4","implicit":true,"key":"tysvgZWkve"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":107,"column":1}},"children":[{"type":"text","value":"「インタラクティブだ」と感じてもらうために，マウスに追随する円も試してみましょう。\n下のように，描画のところだけ少し変えてみてください。","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"yy0cJjKwqZ"}],"key":"OuttjjxnrX"},{"type":"code","lang":"python","value":"    # 2. 背景を塗る\n    screen.fill((255, 255, 255))\n\n    # 3. マウス位置を取得\n    mx, my = pygame.mouse.get_pos()\n\n    # 4. マウスのところに青い円\n    pygame.draw.circle(screen, (0, 0, 255), (mx, my), 20)","position":{"start":{"line":109,"column":1},"end":{"line":118,"column":1}},"key":"zwVPqYsJdE"},{"type":"paragraph","position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"text","value":"動かしてみると，マウスポインタを追いかける青い円が表示されます。","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"sauC28e3U5"},{"type":"break","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"Bd9cNEhWK6"},{"type":"text","value":"これは「リアルタイム入力 → 描画」というゲーム・インタラクティブアートの基本になります。","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"DKtky49Sni"}],"key":"hiT9FVjQNB"},{"type":"heading","depth":2,"position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"children":[{"type":"text","value":"5. 課題（LMS提出）","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"w1IJjHLti1"}],"identifier":"id-5-lms","label":"5. 課題（LMS提出）","html_id":"id-5-lms","implicit":true,"key":"FDUxAj1kJo"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"課題","position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"key":"w5Weog8BX0"}],"key":"kSo5n9lLjk"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":127,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"背景色・円・四角形の色やサイズ・位置を自由に変更し，自分なりの画面をデザインする。","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"fGpj0YRAjx"}],"key":"luvs3bYpjk"}],"key":"G7PfAMtqLC"},{"type":"listItem","spread":true,"position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"プログラムを実行して，ウィンドウが開いている状態のスクリーンショットを撮る。","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"ccZhAKGBju"}],"key":"M3AUbqVIGf"}],"key":"PQvwV24w7O"},{"type":"listItem","spread":true,"position":{"start":{"line":129,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"スクリーンショットをLMSに提出する。","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"oq4H3zFDFY"}],"key":"kSnMuyGayW"}],"key":"nsSAxKdSeK"}],"key":"zI5RPQA90E"},{"type":"paragraph","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"text","value":"注意：","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"RQgVI1ql4V"}],"key":"CcIiwNVi2H"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":132,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"ウィンドウを閉じる前に撮影してください。","position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"key":"h6yajoU1dp"}],"key":"g7mJE5Gofv"}],"key":"HmNmYQL8zX"},{"type":"listItem","spread":true,"position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"これ以降の回の評価のベースになるので，このプログラム (","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"RqDk45WUUl"},{"type":"inlineCode","value":"lesson05.py","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"wSSwrDb843"},{"type":"text","value":") は消さずにとっておいてください。","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"uLKHU81LJZ"}],"key":"aNvSJBEcEF"}],"key":"MVUH5roNM0"}],"key":"nrLnqt40cS"}],"key":"a7AtF771jm"},{"type":"heading","depth":2,"position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"6. ライセンス","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"y2BKIC4jXj"}],"identifier":"id-6","label":"6. ライセンス","html_id":"id-6","implicit":true,"key":"tYAO7fLtwY"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"ffIEX5MqWR"}],"key":"V9BImO0cqr"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"text","value":"このページの本文と図版は CC BY-NC-SA 4.0 とします。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"Ha3MQ7r6ek"},{"type":"break","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"Nn7kOkl3Ba"},{"type":"text","value":"サンプルコードは MIT License とします。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"OwZRCw1FUt"},{"type":"break","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"r2fwBrNKn7"},{"type":"text","value":"一部の学生作品のスクリーンショットなどはこの限りではありません。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"CMORpCPodT"},{"type":"break","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"yVj31uohQP"},{"type":"text","value":"提出物（あなた自身のコードやスクリーンショット）は，ポートフォリオや就職活動で自由に使ってよいものとします。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"kMG8a9hAvX"}],"key":"JjCZa6VXmm"}],"key":"Gv8U4BGEL2"}],"key":"kzxILHrTuU"}],"key":"O7IrMdUiJ8"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"PyGame-CEによるインタラクティブ表現入門その1：PyGame-CEのインストールと実行","url":"/pygame1","group":"流体工学セミナー・教材集"}}},"domain":"http://localhost:3000"}