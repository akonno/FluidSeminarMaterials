{"version":2,"kind":"Article","sha256":"8671812f24e0e02010b4869f9b2062aedd44951eed2f3aab1a05dd0474eefaab","slug":"pygame2","location":"/pygame2.md","dependencies":[],"frontmatter":{"title":"PyGame-CEによるインタラクティブ表現入門その2：PyGame-CEの基本とアニメーション","content_includes_title":false,"copyright":"2025 KONNO Akihisa","exports":[{"format":"md","filename":"pygame2.md","url":"https://akonno.github.io/FluidSeminarMaterials//build/pygame2-df2850f97222ae1533b325a17bda22bd.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"JsbCcLdLKZ"}],"key":"RxlDDHWhKB"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"この回のゴール:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"t2b1T0tgtA"}],"key":"MSiDj5E6XV"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"pygame-ceでさまざまな図形を描ける","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CI13I3aJGH"}],"key":"tMQw7vepT4"}],"key":"psNcNOrGkT"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"かんたんなアニメーションを描ける","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"DiEQlEOD0B"}],"key":"VIrlaYUzz0"}],"key":"AgepLcZ3OV"}],"key":"cIx0rvBn8E"}],"key":"pXXZkpS2Hl"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"PyGame-CEプログラムの構成を学ぶ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"KkhSYQULXM"}],"identifier":"pygame-ce","label":"PyGame-CEプログラムの構成を学ぶ","html_id":"pygame-ce","implicit":true,"key":"ucFtyWi5Ar"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"前回の教材で以下のようなプログラムを作成した．このプログラムの内容を理解していこう．","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"eFIv2eLiNE"}],"key":"mf2doTurPI"},{"type":"code","lang":"python","value":"import pygame\n\n# 初期化\npygame.init()\n\n# 400ピクセル×400ピクセルのウィンドウをつくる\nWIDTH, HEIGHT = 400, 400\nscreen = pygame.display.set_mode((WIDTH, HEIGHT))\npygame.display.set_caption(\"PyGame-CE Program 1: basic drawing\")\n\nclock = pygame.time.Clock()\nrunning = True\n\n# メインループ\nwhile running:\n    # 1. イベント処理\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False  # ウィンドウ右上の×で終了\n\n    # 2. 背景を塗る\n    screen.fill((220, 220, 220))  # R,G,B [0-255]\n\n    # 3. 図形を描く\n    # 青い円 (x=200, y=200, 半径30)\n    pygame.draw.circle(screen, (0, 0, 255), (200, 200), 30)\n\n    # 赤い四角形 (x=50, y=50, 幅80, 高さ80)\n    pygame.draw.rect(screen, (255, 0, 0), (50, 50, 80, 80))\n\n    # 4. 画面を更新\n    pygame.display.flip()\n\n    # 5. フレームレート制御 (1秒あたり60フレーム程度)\n    clock.tick(60)\n\n# 終了処理\npygame.quit()","position":{"start":{"line":13,"column":1},"end":{"line":52,"column":1}},"key":"cwLiAciPEL"},{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"ポイント:","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"O1MmsNj7vk"}],"key":"jjDbTqeTVr"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":55,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"while running:","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"WO7HHLwKAN"},{"type":"text","value":" の部分は、プログラムが動いている間くり返し処理を行う","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"JiCRjlJotp"},{"type":"strong","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"メインループ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"qvfAQE52Du"}],"key":"rAAKHvvASZ"},{"type":"text","value":"である。\nこの中でイベント（入力）を処理していることから、","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"fgjpuTJAGT"},{"type":"strong","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"イベントループ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"hJ6byiVxbB"}],"key":"pqJHLXqlro"},{"type":"text","value":"と呼ばれることもある。","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"YkFAHQoaL9"}],"key":"AupQ2uqnYc"}],"key":"FokwiKYjdU"},{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"if event.type == pygame.QUIT:","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"wNwJAHKu3p"},{"type":"text","value":" は「ウィンドウを閉じる操作が来たらメインループから抜ける」という分岐である．メインループが","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"Y75T3uHoKs"},{"type":"inlineCode","value":"while running:","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"s6QaA52tc0"},{"type":"text","value":"で回っているので，","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"zv8cqjUPSt"},{"type":"inlineCode","value":"running = False","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"MpTKx6Bct2"},{"type":"text","value":"とすればメインループから抜けることになる．","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"s5EJWSiMdP"}],"key":"NYK2gQ4RdO"}],"key":"XVlBKUDMxo"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"screen.fill(...)","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"uvUgLJxGjK"},{"type":"text","value":" は画面全体を灰色に塗りつぶしている．つまり画面の背景色を設定している．","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"SZLxvGkmEU"}],"key":"r3mVMbMCWd"}],"key":"qhL6Ei38U3"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"pygame.draw.circle(...)","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"hOyMlspQBl"},{"type":"text","value":" は円，","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"fMwPubV6Qd"},{"type":"inlineCode","value":"pygame.draw.rect(...)","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"RCq440xQgf"},{"type":"text","value":" は四角形を描いている．","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"hYWaGZDNPc"}],"key":"TwDteHqHqv"}],"key":"hQBZhs7K5M"}],"key":"rbGFTHUMV5"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"メインループの中で円と四角形を描画しているので，つまりこのプログラムは「画面を一度灰色に塗りつぶしてから，円と四角形を描画する」という操作を何度も繰り返し行っている．しかし円と四角形を描画する位置が変わらないので，事実上，静止画を表示したのと同じことになっている．","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"sVkxoBXwI9"}],"key":"U5XgHlbheo"},{"type":"heading","depth":2,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"かんたんなアニメーション","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"a3PQfQ1I4o"}],"identifier":"id","label":"かんたんなアニメーション","html_id":"id","implicit":true,"key":"XeQnfUFVJn"},{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"円と四角形を動かしてみよう．つまり，円と四角形を描画する位置をメインループの中で変えてみよう．","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"zNHfyoKvGJ"}],"key":"cwAVvoQTvN"},{"type":"code","lang":"python","value":"x1 = 200\nx2 = 50\n# メインループ\nwhile running:\n    # 1. イベント処理\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            running = False  # ウィンドウ右上の×で終了\n\n    # 2. 背景を塗る\n    screen.fill((220, 220, 220))  # R,G,B [0-255]\n\n    # 3. 図形を描く\n    # 青い円 (x=x1, y=200, 半径30)\n    pygame.draw.circle(screen, (0, 0, 255), (x1, 200), 30)\n\n    # 赤い四角形 (x=x2, y=50, 幅80, 高さ80)\n    pygame.draw.rect(screen, (255, 0, 0), (x2, 50, x2+30, 80))","position":{"start":{"line":67,"column":1},"end":{"line":86,"column":1}},"key":"ddKCg2gQK9"},{"type":"heading","depth":2,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"text","value":"3. 座標系について","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"SXnxwviygp"}],"identifier":"id-3","label":"3. 座標系について","html_id":"id-3","implicit":true,"key":"auJQO7KJJA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":91,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"画面の左上が (0, 0)","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"VRBHWL5zVr"}],"key":"HU3jlrVsym"}],"key":"zDIgF43Mx7"},{"type":"listItem","spread":true,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"右方向に行くほど x が増える","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"CBP7IAPfvM"}],"key":"BFcaxjKqnM"}],"key":"JezQGSW4JG"},{"type":"listItem","spread":true,"position":{"start":{"line":93,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"下方向に行くほど y が増える","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"key":"LHxQasxwvK"}],"key":"ToRPkGWi4e"}],"key":"n6W7g0u7ns"}],"key":"FAq5AXs90I"},{"type":"paragraph","position":{"start":{"line":95,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"これは，今後「重力が下向き（+y方向）」といった物理シミュレーションを行うときにもそのまま使います。\n（つまり y方向の正の向きが「下」というルールです。）","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"hUvCR8zLOx"}],"key":"zfPSSzlkII"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"例","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"t0RyaroBnz"}],"key":"WEqKkt2tlW"},{"type":"paragraph","position":{"start":{"line":99,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"(x, y) = (200, 200) は，画面のほぼ真ん中あたり。\n半径30の円をそこに置いたのが上のコードの ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"vjTSrMfH3S"},{"type":"inlineCode","value":"pygame.draw.circle(...)","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"XPqvyu7QfU"},{"type":"text","value":" です。","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"WLpKFNpBUE"}],"key":"vh9eK5cGTT"}],"key":"Bs69riCery"},{"type":"heading","depth":2,"position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"4. おまけ: マウスの位置に円を描く","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"F8KSszBBKW"}],"identifier":"id-4","label":"4. おまけ: マウスの位置に円を描く","html_id":"id-4","implicit":true,"key":"fYJqj7oMlZ"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":107,"column":1}},"children":[{"type":"text","value":"「インタラクティブだ」と感じてもらうために，マウスに追随する円も試してみましょう。\n下のように，描画のところだけ少し変えてみてください。","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"aKesIk3cPX"}],"key":"zxvjhOCk7y"},{"type":"code","lang":"python","value":"    # 2. 背景を塗る\n    screen.fill((255, 255, 255))\n\n    # 3. マウス位置を取得\n    mx, my = pygame.mouse.get_pos()\n\n    # 4. マウスのところに青い円\n    pygame.draw.circle(screen, (0, 0, 255), (mx, my), 20)","position":{"start":{"line":109,"column":1},"end":{"line":118,"column":1}},"key":"uYIXM3gwu0"},{"type":"paragraph","position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"text","value":"動かしてみると，マウスポインタを追いかける青い円が表示されます。","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"KeYn9HxoBy"},{"type":"break","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"BHWUDforDu"},{"type":"text","value":"これは「リアルタイム入力 → 描画」というゲーム・インタラクティブアートの基本になります。","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"CnnR2P902v"}],"key":"xXgecaGloq"},{"type":"heading","depth":2,"position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"children":[{"type":"text","value":"5. 課題（LMS提出）","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"ZD25Ea7lKI"}],"identifier":"id-5-lms","label":"5. 課題（LMS提出）","html_id":"id-5-lms","implicit":true,"key":"G0pHwDAi8A"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"課題","position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"key":"gxh6ckPLPM"}],"key":"idU3IawTKK"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":127,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"背景色・円・四角形の色やサイズ・位置を自由に変更し，自分なりの画面をデザインする。","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"jq7QXQhA8h"}],"key":"omimXcuN79"}],"key":"gwR8belhqF"},{"type":"listItem","spread":true,"position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"プログラムを実行して，ウィンドウが開いている状態のスクリーンショットを撮る。","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"xQrFvDNkgp"}],"key":"YjyU03UQdo"}],"key":"CGkad3gvgb"},{"type":"listItem","spread":true,"position":{"start":{"line":129,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"スクリーンショットをLMSに提出する。","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"DIOHgb9XWu"}],"key":"YyRjQH9sF7"}],"key":"GqL7mgQcn2"}],"key":"dcO1Y4R7Pg"},{"type":"paragraph","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"text","value":"注意：","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"o0sLcADUT5"}],"key":"hV0Tjjv6N1"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":132,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"ウィンドウを閉じる前に撮影してください。","position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"key":"E2GosswPxL"}],"key":"p2FqE9M7cZ"}],"key":"DSFQZWL0ku"},{"type":"listItem","spread":true,"position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"これ以降の回の評価のベースになるので，このプログラム (","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"KQYYp65ook"},{"type":"inlineCode","value":"lesson05.py","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"wBWEATVPbX"},{"type":"text","value":") は消さずにとっておいてください。","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"Uqn2ec1xZv"}],"key":"fzfPVUxNSS"}],"key":"ifFrfktJfL"}],"key":"M1I4XnySHZ"}],"key":"SapaX0j2CV"},{"type":"heading","depth":2,"position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"6. ライセンス","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"DGiABlOMZz"}],"identifier":"id-6","label":"6. ライセンス","html_id":"id-6","implicit":true,"key":"f587mMyuC7"},{"type":"admonition","kind":"note","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Note","key":"mU086izDcY"}],"key":"T8YhIrNMDZ"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"text","value":"このページの本文と図版は CC BY-NC-SA 4.0 とします。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"jGQQhH3qRr"},{"type":"break","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"fubZr4DyHt"},{"type":"text","value":"サンプルコードは MIT License とします。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"KwW5bfLxa7"},{"type":"break","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"AxTfGIIc9o"},{"type":"text","value":"一部の学生作品のスクリーンショットなどはこの限りではありません。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"TROo8oSQ2g"},{"type":"break","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"Jb1JQRorwY"},{"type":"text","value":"提出物（あなた自身のコードやスクリーンショット）は，ポートフォリオや就職活動で自由に使ってよいものとします。","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"kNunNblqRs"}],"key":"r7ULseo129"}],"key":"oR9LA1ANVu"}],"key":"qMO1ZhCpFJ"}],"key":"FsEJAoSzyT"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"PyGame-CEによるインタラクティブ表現入門その1：PyGame-CEのインストールと実行","url":"/pygame1","group":"流体工学セミナー・教材集"}}},"domain":"http://localhost:3000"}